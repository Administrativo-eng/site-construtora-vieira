[build]
  publish = "."

#######################################
# 1) Canonical de domínio (produção)
#######################################
[[redirects]]
  from = "https://www.construtoravieira.com.br/*"
  to   = "https://construtoravieira.com.br/:splat"
  status = 301
  force  = true
[[redirects]]
  from = "http://www.construtoravieira.com.br/*"
  to   = "https://construtoravieira.com.br/:splat"
  status = 301
  force  = true
[[redirects]]
  from = "http://construtoravieira.com.br/*"
  to   = "https://construtoravieira.com.br/:splat"
  status = 301
  force  = true

#######################################
# 2) Canonical da Home
#######################################
[[redirects]]
  from = "/home"
  to   = "/"
  status = 301
  force  = true
[[redirects]]
  from = "/index.html"
  to   = "/"
  status = 301
  force  = true
[[redirects]]
  from = "/paginas/index.html"
  to   = "/"
  status = 301
  force  = true

#######################################
# 3) Normalização de barra final
#######################################
[[redirects]]
  from = "/:path/"
  to   = "/:path"
  status = 301
  force  = true

#######################################
# 4) URLs limpas (200) → arquivos reais
#######################################
# Institucionais
[[redirects]]  from="/sobrenos"        to="/paginas/sobrenos.html"        status=200
[[redirects]]  from="/servicos"        to="/paginas/servicos.html"        status=200
[[redirects]]  from="/obras"           to="/paginas/obras.html"           status=200
[[redirects]]  from="/empreendimentos" to="/paginas/empreendimentos.html" status=200
[[redirects]]  from="/sustentabilidade" to="/paginas/sustentabilidade.html" status=200
[[redirects]]  from="/noticias"        to="/paginas/noticias.html"        status=200
[[redirects]]  from="/simulacao"       to="/paginas/simulacao.html"       status=200
[[redirects]]  from="/trabalheconosco" to="/paginas/trabalheconosco.html" status=200
[[redirects]]  from="/contato"         to="/paginas/contato.html"         status=200

# Serviços — slugs com hífen
[[redirects]]  from="/construcao-residencial" to="/paginas/construcaoresidencial.html" status=200
[[redirects]]  from="/construcao-comercial"   to="/paginas/galpoes.html"              status=200
[[redirects]]  from="/estruturas-metalicas"   to="/paginas/estrutura.html"            status=200
[[redirects]]  from="/obras-publicas"         to="/paginas/obrapublica.html"          status=200
[[redirects]]  from="/reformas"               to="/paginas/reformas.html"             status=200

#######################################
# 5) .html → URL limpa (301 canônico)
#######################################
[[redirects]] from="/paginas/construcaoresidencial.html" to="/construcao-residencial" status=301 force=true
[[redirects]] from="/paginas/galpoes.html"               to="/construcao-comercial"   status=301 force=true
[[redirects]] from="/paginas/estrutura.html"             to="/estruturas-metalicas"   status=301 force=true
[[redirects]] from="/paginas/obrapublica.html"           to="/obras-publicas"         status=301 force=true
[[redirects]] from="/paginas/reformas.html"              to="/reformas"               status=301 force=true

# ⚠️ Removida a regra genérica /paginas/:slug.html → /:slug
# (para não gerar loop com as regras 200 acima)

#######################################
# 6) 404 custom
#######################################
[[redirects]]
  from = "/*"
  to   = "/404.html"
  status = 404

#######################################
# 7) Headers (segurança)
#######################################
# (mantém tudo igual ao seu código anterior)
